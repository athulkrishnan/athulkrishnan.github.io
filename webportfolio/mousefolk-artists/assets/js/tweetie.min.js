/*
 MouseFolkHomepage 2016-01-22 
*/
!function(a){a.fn.twittie=function(b,c){var d="function"==typeof b?b:c,e=a.extend({username:null,list:null,hashtag:null,count:10,hideReplies:!1,dateFormat:"%b/%d/%Y",template:"{{date}} - {{tweet}}",apiPath:"api/tweet.php"},b instanceof Object?b:{});e.list&&!e.username&&a.error("If you want to fetch tweets from a list, you must define the username of the list owner.");var f=function(a){return a.replace(/(https?:\/\/([-\w\.]+)+(:\d+)?(\/([\w\/_\.]*(\?\S+)?)?)?)/gi,'<a href="$1" target="_blank" title="Visit this link">$1</a>').replace(/#([a-zA-Z0-9_]+)/g,'<a href="http://twitter.com/search?q=%23$1&amp;src=hash" target="_blank" title="Search for #$1">#$1</a>').replace(/@([a-zA-Z0-9_]+)/g,'<a href="http://twitter.com/$1" target="_blank" title="$1 on Twitter">@$1</a>')},g=function(a){for(var b=e.template,c="date tweet avatar url retweeted screen_name user_name".split(" "),d=0,f=c.length;f>d;d++)b=b.replace(new RegExp("{{"+c[d]+"}}","gi"),a[c[d]]);return b};this.html("<span>Loading...</span>");var h=this;a.getJSON(e.apiPath,{username:e.username,list:e.list,hashtag:e.hashtag,count:e.count,exclude_replies:e.hideReplies},function(a){h.find("span").fadeOut("fast",function(){h.html("<ul></ul>");for(var b=0;b<e.count;b++){var c=!1;if(a[b])c=a[b];else{if(void 0===a.statuses||!a.statuses[b])break;c=a.statuses[b]}for(var i=c.user.name,j=c.created_at,j=j.split(" "),j=new Date(Date.parse(j[1]+" "+j[2]+", "+j[5]+" "+j[3]+" UTC")),k="January February March April May June July August September October November December".split(" "),j={"%d":j.getDate(),"%m":j.getMonth()+1,"%b":k[j.getMonth()].substr(0,3),"%B":k[j.getMonth()],"%y":String(j.getFullYear()).slice(-2),"%Y":j.getFullYear()},k=e.dateFormat,l=e.dateFormat.match(/%[dmbByY]/g),m=0,n=l.length;n>m;m++)k=k.replace(l[m],j[l[m]]);c={user_name:i,date:k,tweet:f(c.retweeted?"RT @"+c.user.screen_name+": "+c.retweeted_status.text:c.text),avatar:'<img src="'+c.user.profile_image_url+'" />',url:"http://twitter.com/"+c.user.screen_name+"/status/"+c.id_str,retweeted:c.retweeted,screen_name:f("@"+c.user.screen_name)},h.find("ul").append("<li>"+g(c)+"</li>")}"function"==typeof d&&d()})})}}(jQuery);